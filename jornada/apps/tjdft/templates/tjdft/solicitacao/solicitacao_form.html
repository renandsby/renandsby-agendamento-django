{% extends "tjdft/base.html" %}
{% load shared_components %}

{% block css_imports %}
{{block.super}}
<link href="{% static 'tjdft/css/solicitacao_form.css'%}" rel="stylesheet" type="text/css">
{% endblock %}


{% block body %}


{% Form form=form enctype="multipart/form-data" %}

{% arg botao_voltar %}
  {% url 'tjdft:solicitacao-list' as voltar_url %}
  {% BotaoVoltar url=voltar_url %}{% /BotaoVoltar %}
{% endarg %}

{% if form.instance.alteracao_solicitada %}
<div class="row">
  <div class="col-12 py-1 text-danger text-align-center">   
    Alteração Solicitada: <small>{{solicitacao.mensagem_alteracao}}</small>
  </div>
</div>
{% endif %}

<fieldset class="border rounded p-3 bg-light mb-3">
  <div class="row">
    <div class="col-md-7 py-1">
      {% LabeledInput field=form.nome_adolescente %} {% /LabeledInput %}
    </div>
    <div class="col-md-5 py-1">
      {% LabeledInput field=form.data_nascimento %}{% /LabeledInput %}
    </div>
  </div>
  <div class="row">
    <div class="col-md-7 py-1">
      {% LabeledInput field=form.nome_mae %} {% /LabeledInput %}
    </div>
    <div class="col-md-5 py-1">
      {% LabeledInput field=form.numero_processo %}{% /LabeledInput %}
    </div>
  </div>
  <div class="row">
    <div class="col-12 py-1">
      {% LabeledInput field=form.observacoes %} {% /LabeledInput %}
    </div>
  </div>
</fieldset>

<fieldset class="border rounded p-3 bg-light mb-3">
  <div class="row">
    
    <div class="col-md-6">
      {% LabeledInput field=form.acao_solicitada %}{% /LabeledInput %}
    </div>
    <div class="col-md-6">
      {% LabeledInput field=form.medida %}{% /LabeledInput %}
    </div>
  </div>
</fieldset>

{% Fieldset legenda="Anexos" legenda_transparente="True" class="bg-light py-3 px-2"%}

{% InlineFormset formset=anexos %}
{% arg empty_form %}
<div class="row justify-content-center px-0 mb-2 m-0">
  {{ anexos.empty_form.id }}
  
  <div class="col-lg-4 px-1 mt-auto mb-2">
    {% LabeledInput field=anexos.empty_form.anexo %}{% /LabeledInput %}
  </div>
  
  <div class="col-lg-4 px-1 mt-auto mb-2">
          {% LabeledInput field=anexos.empty_form.tipo_anexo %}{% /LabeledInput %}
        </div>
        
        <div class="col-lg-4 px-1 mt-auto mb-2">
          {% LabeledInput field=anexos.empty_form.descricao %}{% /LabeledInput %}
        </div>
        
        {% comment %} <div class="col-lg-3 px-1 mt-1 mb-2">
          {% LabeledInput field=anexos.empty_form.DELETE %}{% /LabeledInput %}
        </div> {% endcomment %}
        
        {{ anexos.empty_form.solicitacao }}
      </div>
      {% endarg %}
      
      {% for anexo in anexos %}
      {% FormErrors form=anexo %}{% /FormErrors %}
      <div class="row justify-content-center px-0 mb-2 m-0">
        {{ anexo.id }}
        
        <div class="col-lg-4 px-1 mt-auto mb-2">
          {% LabeledInput field=anexo.anexo %}{% /LabeledInput %}
        </div>
        
        <div class="col-lg-4 px-1 mt-auto mb-2">
          {% LabeledInput field=anexo.tipo_anexo %}{% /LabeledInput %}
        </div>
        
        <div class="col-lg-4 px-1 mt-auto mb-2">
          {% LabeledInput field=anexo.descricao %}{% /LabeledInput %}
        </div>
        
        {% comment %} <div class="col-lg-3 px-1 mt-1 mb-2">
          {% if anexo.instance.criado_por == request.user or not anexo.instance.pk %}
              {% LabeledInput field=anexo.DELETE %}{% /LabeledInput %}
          {% else %}
              <small class="fst-italic" style="color: #777474;"> criado por: {{anexo.instance.criado_por}} </small>
          {% endif %}
        </div> {% endcomment %}
        
        {{ anexo.solicitacao }}
      </div>
      {% endfor %}
      
      
      
      {% /InlineFormset%}
      
      {% /Fieldset %}
      
      
      {% /Form %}
      
      
      
      
      {% endblock %}
      